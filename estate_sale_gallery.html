<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Estate Sale Gallery</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f9f9f9; }
    header { text-align: center; margin-bottom: 20px; }
    h1 { font-size: 2em; margin: 0; }
    .gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; }
    .card { background: #fff; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .card img { width: 100%; height: auto; display: block; }
    .card-content { padding: 10px; }
    .card-content h2 { font-size: 1.1em; margin: 0 0 5px; }
    .card-content p { margin: 0 0 5px; font-size: 0.9em; }
    form { max-width: 600px; margin: 40px auto; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    form h2 { margin-top: 0; }
    form input, form textarea, form select { width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; }
    form button { padding: 10px 20px; border: none; background: #007BFF; color: #fff; border-radius: 4px; cursor: pointer; }
  </style>
</head>
<body>
  <header>
    <h1>Estate Sale Gallery</h1>
    <p>
      Contact: <a href="mailto:youremail@example.com">youremail@example.com</a> |
      Phone: (123) 456-7890 |
      Location: Your Suburb, Your City
    </p>
  </header>

  <!-- Gallery Section -->
  <section class="gallery" id="gallery">
    <!-- Cards are injected here by JavaScript -->
  </section>

  <!-- Inquiry Form -->
  <form action="mailto:youremail@example.com?subject=Estate%20Sale%20Inquiry" method="POST" enctype="text/plain">
    <h2>Enquire About an Item</h2>
    <input type="text" name="name" placeholder="Your Name" required>
    <input type="email" name="email" placeholder="Your Email" required>
    <select name="sku">
      <!-- SKUs will be populated by JS -->
    </select>
    <textarea name="message" rows="4" placeholder="I am interested in this item…"></textarea>
    <button type="submit">Send Inquiry</button>
  </form>

  <!-- PapaParse for CSV parsing -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
  <script>
    // 1) Publish your Google Sheet as CSV and paste its URL below
    const sheetCsvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSyanuQjDOvLEw1JJ1rcWgqMyrmNgxElVPUVnAatc1kUUog4yAXkd4BthJRO5WVG3myv9ggDsRlOrZy/pub?output=csv';

    // 2) Function to build each card
    function createCard(item) {
      const photoUrl = item.Photos.split(',')[0].trim();
      return `
        <div class="card">
          <img src="${photoUrl}" alt="${item['Item Name']}">
          <div class="card-content">
            <h2>${item['Item Name']}</h2>
            <p>${item['Dimensions (H × W × D cm)']} cm | Qty: ${item.Qty}</p>
            <p>Price: ${item['Est. Price Range (AUD)']} AUD</p>
          </div>
        </div>
      `;
    }

    // 3) Populate SKU dropdown in the form
    function addOption(selectEl, sku) {
      const opt = document.createElement('option');
      opt.value = sku;
      opt.text = sku;
      selectEl.appendChild(opt);
    }

    // 4) Fetch, parse, and render
    Papa.parse(sheetCsvUrl, {
      download: true,
      header: true,
      complete: function(results) {
        const gallery = document.getElementById('gallery');
        const skuSelect = document.querySelector('form select[name="sku"]');

        results.data.forEach(item => {
          if (item.SKU) {
            gallery.insertAdjacentHTML('beforeend', createCard(item));
            addOption(skuSelect, item.SKU);
          }
        });
      }
    });
  </script>
</body>
</html>
